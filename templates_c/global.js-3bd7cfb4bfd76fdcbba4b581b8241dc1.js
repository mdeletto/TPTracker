if(typeof(window.console)=='undefined'){window.console={log:function(str){}};}if(typeof(window.__xatajax_included__)!='object'){window.__xatajax_included__={};};(function(){var headtg=document.getElementsByTagName("head")[0];if(!headtg)return;var linktg=document.createElement("link");linktg.type="text/css";linktg.rel="stylesheet";linktg.href="/TPTracker/index.php?-action=css&--id=switch_use-7ea0ee4b160977bc0e3a809a38d22b6d";linktg.title="Styles";headtg.appendChild(linktg);})();if(typeof(window.__xatajax_included__['xataface/modules/g2/global.js'])=='undefined'){window.__xatajax_included__['xataface/modules/g2/global.js']=true;if(typeof(window.__xatajax_included__['xatajax.actions.js'])=='undefined'){window.__xatajax_included__['xatajax.actions.js']=true;if(typeof(window.__xatajax_included__['xatajax.form.core.js'])=='undefined'){window.__xatajax_included__['xatajax.form.core.js']=true;(function(){var $=jQuery;XataJax.form={findField:findField,createForm:createForm,submitForm:submitForm};function findField(startNode,fieldName){var field=null;$(startNode).parents('.xf-form-group').each(function(){if(field){return;}
field=$('[data-xf-field="'+fieldName+'"]',this).get(0);});if(!field){var parentGroup=$(startNode).parents('form').get(0);field=$('[data-xf-field="'+fieldName+'"]',parentGroup).get(0);}
return field;}
function createForm(method,params,target,action){if(typeof(action)=='undefined')action=DATAFACE_SITE_HREF;var form=$('<form></form>').attr('action',action).attr('method',method);if(target)form.attr('target',target);$.each(params,function(key,value){form.append($('<input/>').attr('type','hidden').attr('name',key).attr('value',value));});return form;}
function submitForm(method,params,target,action){var form=createForm(method,params,target,action);$('body').append(form);form.submit();}})();}
(function(){var $=jQuery;if(typeof(XataJax.actions)=='undefined'){XataJax.actions={};}
XataJax.actions.doSelectedAction=doSelectedAction;XataJax.actions.handleSelectedAction=handleSelectedAction;XataJax.actions.hasRecordSelectors=hasRecordSelectors;XataJax.actions.getSelectedIds=getSelectedIds;function getSelectedIds(container,asString){if(typeof(asString)=='undefined')asString=false;var ids=[];var checkboxes=$('input.rowSelectorCheckbox',container);checkboxes.each(function(){if($(this).is(':checked')&&$(this).attr('xf-record-id')){ids.push($(this).attr('xf-record-id'));}});if(asString)return ids.join("\n");return ids;}
function doSelectedAction(params,container,confirmCallback,emptyCallback){var ids=[];var checkboxes=$('input.rowSelectorCheckbox',container);checkboxes.each(function(){if($(this).is(':checked')&&$(this).attr('xf-record-id')){ids.push($(this).attr('xf-record-id'));}});if(ids.length==0){if(typeof(emptyCallback)=='function'){emptyCallback(params,container);}else{alert('No records are currently selected.  Please first select the records that you wish to act upon.');}
return;}
if(typeof(confirmCallback)=='function'){if(!confirmCallback(ids)){return;}}
params['--selected-ids']=ids.join("\n");XataJax.form.submitForm('post',params);}
function hasRecordSelectors(container){return($('input.rowSelectorCheckbox',container).size()>0);}
function handleSelectedAction(aTag,selector){var href=$(aTag).attr('href');var confirmMsg=$(aTag).attr('data-xf-confirm-message');var confirmCallback=null;if(confirmMsg){confirmCallback=function(){return confirm(confirmMsg);};}
var params=XataJax.util.getRequestParams(href);XataJax.actions.doSelectedAction(params,$(selector),confirmCallback);return false;}})();}
if(typeof(window.__xatajax_included__['xataface/modules/g2/advanced-find.js'])=='undefined'){window.__xatajax_included__['xataface/modules/g2/advanced-find.js']=true;(function(){var $=jQuery;$(document).ajaxError(function(e,xhr,settings,exception){if(!console)return;console.log(e);console.log(xhr);console.log(settings);console.log(exception);});var g2=XataJax.load('xataface.modules.g2');g2.AdvancedFind=AdvancedFind;function AdvancedFind(o){this.table=$('meta#xf-meta-tablename').attr('content');this.el=$('<div>').addClass('xf-advanced-find').css('display','none').get(0);$.extend(this,o);this.loaded=false;this.loading=false;this.installed=false;if(window.location.hash==='#search'){this.show();}}
$.extend(AdvancedFind.prototype,{load:load,ready:ready,show:show,hide:hide,install:install});function load(callback){callback=callback||function(){};var self=this;$(this.el).load(DATAFACE_SITE_HREF+'?-table='+encodeURIComponent(this.table)+'&-action=g2_advanced_find_form',function(){decorateConfigureButton(this);var params=XataJax.util.getRequestParams();var widgets=[];var formEl=this;$('[name]',this).each(function(){if(params[$(this).attr('name')]){$(this).val(params[$(this).attr('name')]);}
var widget=null;if($(this).attr('data-xf-find-widget-type')){widget=$(this).attr('data-xf-find-widget-type');}else if($(this).get(0).tagName.toLowerCase()=='select'){widget='select';}
if(widget){widgets.push('xataface/findwidgets/'+widget+'.js');}});if(widgets.length>0){XataJax.util.loadScript(widgets.join(','),function(){self.loaded=true;callback.call(self);$('[name]',formEl).each(function(){if(params[$(this).attr('name')]){$(this).val(params[$(this).attr('name')]);}
var widget=null;if($(this).attr('data-xf-find-widget-type')){widget=$(this).attr('data-xf-find-widget-type');}else if($(this).get(0).tagName.toLowerCase()=='select'){widget='select';}
if(widget){var w=new xataface.findwidgets[widget]();w.install(this);}});$('button.xf-advanced-find-clear',formEl).click(function(){$('input[name],select[name]',formEl).val('');return false;});$('button.xf-advanced-find-search',formEl).click(function(){$(this).parents('form').find('[name="-action"]').val('list');$(this).parents('form').submit();});$(self).trigger('onready');});}else{self.loaded=true;callback.call(self);$(self).trigger('onready');}});}
function ready(callback){if(this.loaded){callback.call(this);}else{$(this).bind('onready',callback);if(!this.loading){this.load();}}}
function install(){if(this.installed)return;$(this.el).insertAfter('a.xf-show-advanced-find');this.installed=true;}
function show(){this.ready(function(){window.location.hash='#search';if(!this.loaded)throw"Cannot show advanced find until it is ready.";if(!this.installed)this.install();$(this.el).parents('form').find('[name="-action"]').val('list');if(!$(this.el).is(':visible')){$(this.el).slideDown(function(){var x=$(this).offset().left;$(this).width($(window).width()-x-5);});}});}
function hide(){this.ready(function(){window.location.hash='';if(!this.loaded||!this.installed)return;if($(this.el).is(':visible')){$(this.el).slideUp();}});}
function decorateConfigureButton(el){$('li.configure-advanced-find-form-action a',el).click(function(){var iframe=$('<iframe>').attr('width','100%').attr('height',$(window).height()*0.8).on('load',function(){var winWidth=$(window).width()*0.8;var width=Math.min(800,winWidth);$(this).width(width);dialog.dialog("option","position","center");var showHideController=iframe.contentWindow.xataface.controllers.ShowHideColumnsController;showHideController.saveCallbacks.push(function(data){data.preventDefault=true;dialog.dialog('close');window.location.reload(true);});}).attr('src',$(this).attr('href')+'&--format=iframe').get(0);;var dialog=$("<div></div>").append(iframe).appendTo("body").dialog({autoOpen:false,modal:true,resizable:false,width:"auto",height:"auto",close:function(){$(iframe).attr("src","");},buttons:{'Save':function(){$('button.save',iframe.contentWindow.document.body).click();}},create:function(event,ui){$('body').addClass('stop-scrolling');},beforeClose:function(event,ui){$('body').removeClass('stop-scrolling');}});dialog.dialog("option","title","Show/Hide Columns").dialog("open");return false;});}})();}
if(typeof(window.__xatajax_included__['jquery.floatheader.js'])=='undefined'){window.__xatajax_included__['jquery.floatheader.js']=true;(function($){$.fn.floatHeader=function(config){config=$.extend({fadeOut:200,fadeIn:200,forceClass:false,markerClass:'floating',floatClass:'floatHeader',recalculate:false,IE6Fix_DetectScrollOnBody:true},config);return this.each(function(){var self=$(this);var tableClone=self[0].cloneNode(false);var table=$(tableClone);var cloneId=table.attr("id")+"FloatHeaderClone";table.attr("id",cloneId);table.parent().remove();self.floatBox=$('<div class="'+config.floatClass+'"style="display:none"></div>');self.floatBox.append(table);self.IEWindowWidth=document.documentElement.clientWidth;self.IEWindowHeight=document.documentElement.clientHeight;if(!$.browser.msie){config.IE6Fix_DetectScrollOnBody=false;}else{if($.browser.version>7){config.IE6Fix_DetectScrollOnBody=false;}}
var scrollElement=config.IE6Fix_DetectScrollOnBody?$('body'):$('div.fixedLeftWrapper').add(window);scrollElement.scroll(function(){if(self.floatBoxVisible){if(!showHeader(self,self.floatBox)){var offset=self.offset();self.floatBox.css('position','absolute');self.floatBox.css('top',offset.top);self.floatBox.css('left',offset.left);self.floatBoxVisible=false;if(config.cbFadeOut){config.cbFadeOut(self.floatBox);}else{self.floatBox.stop(true,true);self.floatBox.fadeOut(config.fadeOut);}}}else if(showHeader(self,self.floatBox)){if(table.children().length===0){createFloater(table,self,config);}
self.floatBoxVisible=true;if($.browser.msie&&$.browser.version<7){self.floatBox.css('position','absolute');}else{self.floatBox.css('position','fixed');}
if(config.cbFadeIn){config.cbFadeIn(self.floatBox);}else{self.floatBox.stop(true,true);self.floatBox.fadeIn(config.fadeIn);}}
if(self.floatBoxVisible){if($.browser.msie&&$.browser.version<=7){self.floatBox.css('top',$(window).scrollTop());}else{self.floatBox.css('top',0);}
self.floatBox.css('left',self.offset().left-$(window).scrollLeft());if(config.recalculate){recalculateColumnWidth(table,self,config);}}});if($.browser.msie&&$.browser.version<=7){$(window).resize(function(){if((self.IEWindowWidth!=document.documentElement.clientWidth)||(self.IEWindowHeight!=document.documentElement.clientHeight)){self.IEWindowWidth=document.documentElement.clientWidth;self.IEWindowHeight=document.documentElement.clientHeight;if(table.children().length>0){table.fastempty();createFloater(table,self,config);}}});}else{$(window).resize(function(){if(table.children().length>0){table.fastempty();createFloater(table,self,config);}});};$(self).after(self.floatBox);this.fhRecalculate=function(){recalculateColumnWidth(table,self,config);};this.fhInit=function(){if(table.children().length>0){table.fastempty();createFloater(table,self,config);}};$.fn.fastempty=function(){if(this[0]){while(this[0].hasChildNodes()){this[0].removeChild(this[0].lastChild);}}
return this;};});};function createFloater(target,template,config){target.width(template.width());var items;if(!config.forceClass&&template.children('thead').length>0){items=template.children('thead').eq(0).children();var thead=jQuery("<thead/>");target.append(thead);target=thead;}else{items=template.find('.'+config.markerClass);}
items.each(function(){var row=$(this);var rowClone=row[0].cloneNode(false);var floatRow=$(rowClone);row.children().each(function(){var cell=$(this);var floatCell=cell.clone();floatCell.width(cell.width());floatRow.append(floatCell);});target.append(floatRow);});}
function recalculateColumnWidth(target,template,config){target.width(template.width());var src;var dst;if(!config.forceClass&&template.children('thead').length>0){src=template.children('thead').eq(0).children().eq(0);dst=target.children('thead').eq(0).children().eq(0);}else{src=template.find('.'+config.markerClass).eq(0);dst=target.children().eq(0);}
dst=dst.children().eq(0);src.children().each(function(index,element){dst.width($(element).width());dst=dst.next();});}
function showHeader(element,floater){var elem=$(element);var top=$(window).scrollTop();var y0=elem.offset().top;var height=elem.height()-floater.height();var foot=elem.children('tfoot');if(foot.length>0){height-=foot.height();}
return y0<=top&&top<=y0+height;}})(jQuery);}
(function(){var $=jQuery;var _=xataface.lang.get;$(document).ready(function(){$('#dataface-sections-left-column').each(function(){var txt=$(this).text().replace(/^\W+/,'').replace(/\W+$/);if(!txt&&$('img',this).length==0)$(this).hide();});$('#left_column').each(function(){var txt=$(this).text().replace(/^\W+/,'').replace(/\W+$/);if(!txt&&$('img',this).length==0)$(this).hide();});var resultListTable=$('#result_list').get(0);if(resultListTable){$(resultListTable).floatHeader({recalculate:true});var rowPermissions={};$('input.rowSelectorCheckbox[data-xf-permissions]',resultListTable).each(function(){var perms=$(this).attr('data-xf-permissions').split(',');$.each(perms,function(){rowPermissions[this]=1;});});$('.result-list-actions li.selected-action').each(function(){var perm=$(this).children('a').attr('data-xf-permission');if(perm&&!rowPermissions[perm]){$(this).hide();}});}
$('table.listing > tbody > tr > td span[data-fulltext]').each(function(){var span=this;$(span).addClass('short-text');var moreDiv=null;var td=$(this).parent();while($(td).prop('tagName').toLowerCase()!='td'){td=$(td).parent();}
td=$(td).get(0);$(td).css({});var moreButton=$('<a>').addClass('listing-show-more-button').attr('href','#').html('...').click(showMore).get(0);var lessButton=$('<a href="#" class="listing-show-less-button">...</a>').click(showLess).get(0);function showMore(){var width=$(td).width();if(moreDiv==null){var divContent=null;var parentA=$(span).parent('a');if(parentA.size()>0){divContent=parentA.clone();$('span',divContent).removeClass('short-text').removeAttr('data-fulltext').text($(span).attr('data-fulltext'));}else{divContent=$(span).clone();divContent.removeClass('short-text').text($(span).attr('data-fulltext'));}
var divWidth=width-$(moreButton).width()-10;moreDiv=$('<div style="white-space:normal;"></div>').css('width',divWidth).append(divContent).addClass('full-text').get(0);$(td).prepend(moreDiv);}
$(td).addClass('expanded');return false;}
function showLess(){$(td).removeClass('expanded');return false;}
$(td).append(moreButton);$(td).append(lessButton);});$('table.listing td.row-actions-cell').each(function(){var reqWidth=0;$('.row-actions a',this).each(function(){reqWidth+=$(this).outerWidth(true);});$(this).width(reqWidth);$(this).css({padding:0,margin:0,'padding-right':'5px','padding-top':'3px'});});$(".xf-dropdown a.trigger").each(function(){var atag=this;$(this).parent().find('ul li.selected > a').each(function(){$(atag).append(': '+$(this).text());$(atag).parent().addClass('selected');});}).append('<span class="arrow"></span>').click(function(){var atag=this;if($(this).hasClass('menu-visible')){$(this).removeClass('menu-visible');$(this).parent().find(">ul").slideUp('slow');$('body').unbind('click.xf-dropdown');}else{$(this).addClass('menu-visible');$(this).parent().find(">ul").each(function(){if($(atag).hasClass('horizontal-trigger')){var pos=$(atag).position();$(this).css('top',0).css('left',20);}
$(this).css('z-index',10000);}).slideDown('fast',function(){$('body').bind('click.xf-dropdown',function(){$(atag).trigger('click');});}).show();}
return false;}).hover(function(){$(this).addClass("subhover");},function(){$(this).removeClass("subhover");});var hasResultListCheckboxes=XataJax.actions.hasRecordSelectors($('.resultList'));var hasRelatedListCheckboxes=XataJax.actions.hasRecordSelectors($('.relatedList'));$('.selected-action a').each(function(){if(!hasResultListCheckboxes){$(this).parent().hide();}}).click(function(){XataJax.actions.handleSelectedAction(this,'.resultList');return false;});$('.related-selected-action a').each(function(){if(!hasRelatedListCheckboxes){$(this).parent().hide();}}).click(function(){XataJax.actions.handleSelectedAction(this,'.relatedList');return false;});$('.xf-button-bar').each(function(){var bar=this;var container=$(bar).parent();var containerOffset=$(container).offset();if(containerOffset==null)containerOffset={left:0,top:0};var parentWidth=$(container).width();var rightBound=containerOffset.left+parentWidth;var windowWidth=$(window).width();var pos=$(this).offset();var left=pos.left;var screenWidth=$(window).width();var outerWidth=$(this).outerWidth();var excess=outerWidth+pos.left-screenWidth;if(excess>0){var oldWidth=$(this).width();$(this).width(oldWidth-excess);var newWidth=oldWidth-excess;}
$(window).scroll(function(){var container=$(bar).parent();var containerOffset=$(container).offset();if(containerOffset==null)containerOffset={left:0,top:0};var leftMost=containerOffset.left;var rightMost=leftMost+$(container).innerWidth();var currMarginLeft=$(bar).css('margin-left');var scrollLeft=$(window).scrollLeft();if(scrollLeft<left){$(bar).css('margin-left',-30);$(bar).width(Math.min(newWidth+scrollLeft,$(container).innerWidth()-10));}else if(scrollLeft<excess+60){$(bar).css('margin-left',scrollLeft-left-30);}});});$('.list-view-menu').each(function(){var self=this;if($('.action-sub-menu',this).children().size()<2){$(self).hide();}});$('form h3.Dataface_collapsible_sidebar').each(function(){var siblings=$(this).parent().find('>h3.Dataface_collapsible_sidebar:visible');if(siblings.size()<=1)$(this).hide();});$('.xf-save-new-related-record a').click(function(){$('form input[name="-Save"]').click();return false;});$('.xf-save-new-record a').click(function(){$('form input[name="--session:save"]').click();return false;});$('.result-stats').each(function(){if($(this).hasClass('details-stats'))return;var resultStats=this;var isRelated=$(resultStats).hasClass('related-result-stats');var start=$('span.start',this).text().replace(/^\W+/,'').replace(/\W+$/);var end=$('span.end',this).text().replace(/^\W+/,'').replace(/\W+$/);var found=$('span.found',this).text().replace(/^\W+/,'').replace(/\W+$/);var limit=$('.limit-field input').val();start=parseInt(start)-1;end=parseInt(end);found=parseInt(found);limit=parseInt(limit);$(this).css('cursor','pointer');$(this).click(function(){var div=$('<div>').addClass('xf-change-limit-dialog');var label=$('<p>Show <input class="limitter" type="text" value="'+(limit)+'" size="2"/> per page starting at <input type="text" value="'+start+'" class="starter" size="2"/> </p>');$('input.limitter',label).change(function(){var query=XataJax.util.getRequestParams();var limitParam='-limit';if(isRelated){limitParam='-related:limit';}
query[limitParam]=$(this).val();window.location.href=XataJax.util.url(query);}).css({'font-size':'12px'});$('input.starter',label).change(function(){var query=XataJax.util.getRequestParams();var skipParam='-skip';if(isRelated){skipParam='-related:skip';}
query[skipParam]=$(this).val();window.location.href=XataJax.util.url(query);}).css({'font-size':'12px'});div.append(label);var offset=$(resultStats).offset();$('body').append(div);$(div).css({position:'absolute',top:offset.top+$(resultStats).height(),left:Math.min(offset.left,$(window).width()-275),'background-color':'#bbccff','z-index':1000,'padding':'2px 5px 2px 10px','border-radius':'5px'});$(div).show();$(div).click(function(e){e.preventDefault();e.stopPropagation();});function onBodyClick(){$(div).remove();$('body').unbind('click',onBodyClick);}
setTimeout(function(){$('body').bind('click',onBodyClick);},1000);});});$('.details-stats').each(function(){var resultStats=this;var cursor=$('span.cursor',this).text();var found=$('span.found',this).text();cursor=parseInt(cursor);found=parseInt(found);$(this).click(function(){var div=$('<div>').addClass('xf-change-limit-dialog');var label=$('<p>Show <input class="limitter" type="text" value="'+(cursor)+'" size="2"/> of '+found+' </p>');$('input.limitter',label).change(function(){var query=XataJax.util.getRequestParams();query['-cursor']=parseInt($(this).val())-1;window.location.href=XataJax.util.url(query);}).css({'font-size':'12px'});div.append(label);var offset=$(resultStats).offset();$('body').append(div);$(div).css({position:'absolute !important',top:offset.top+$(resultStats).height(),left:Math.min(offset.left,$(window).width()-150),'background-color':'#bbccff','z-index':1000,'padding':'2px 5px 2px 10px','border-radius':'5px'});$(div).show();$(div).click(function(e){e.preventDefault();e.stopPropagation();});function onBodyClick(){$(div).remove();$('body').unbind('click',onBodyClick);}
setTimeout(function(){$('body').bind('click',onBodyClick);},1000);}).css('cursor','pointer');});(function(){var searchField=$('.xf-search-field').parents('form').submit(function(){$(this).find(':input[value=""]').attr('disabled',true);});})();(function(){if(typeof(sessionStorage)=='undefined'){sessionStorage={};}
function parseString(str){var parts=str.split('&');var out=[];$.each(parts,function(){var kv=this.split('=');out[decodeURIComponent(kv[0])]=decodeURIComponent(kv[1]);});return out;}
var currTable=$('meta#xf-meta-tablename').attr('content');if(currTable){var currSearch=$('meta#xf-meta-search-query').attr('content');var currSearchUrl=window.location.href;var searchSelected=false;if(!currSearch){currSearch=sessionStorage['xf-currSearch-'+currTable+'-params'];currSearchUrl=sessionStorage['xf-currSearch-'+currTable+'-url'];}else{searchSelected=true;sessionStorage['xf-currSearch-'+currTable+'-params']=currSearch;sessionStorage['xf-currSearch-'+currTable+'-url']=currSearchUrl;}
if(currSearch){var item=$('<li>');if(searchSelected)item.addClass('selected');var a=$('<a>').attr('href',currSearchUrl).attr('title',_('themes.g2.VIEW_SEARCH_RESULTS','View Search results')).text(_('themes.g2.SEARCH_RESULTS','Search Results'));item.append(a);$('.tableQuicklinks').append(item);}
var currRecord=$('meta#xf-meta-record-title').attr('content');var currRecordUrl=window.location.href;var recordSelected=false;if(!currRecord){currRecord=sessionStorage['xf-currRecord-'+currTable+'-title'];currRecordUrl=sessionStorage['xf-currRecord-'+currTable+'-url'];}else{recordSelected=true;sessionStorage['xf-currRecord-'+currTable+'-title']=currRecord;sessionStorage['xf-currRecord-'+currTable+'-url']=currRecordUrl;}
var currRecordId=$('meta#xf-meta-record-id').attr('content');if(currRecordId){(function(){$('a.xf-related-record-link[data-xf-related-record-id]').click(function(){var idKey='xf-parent-of-'+$(this).attr('data-xf-related-record-id');var idUrl='xf-parent-of-url-'+$(this).attr('data-xf-related-record-id');var idTitle='xf-parent-of-title-'+$(this).attr('data-xf-related-record-id');sessionStorage[idKey]=currRecordId;sessionStorage[idUrl]=currRecordUrl;sessionStorage[idTitle]=currRecord;return true;});})();}
if(currRecord){var isChildRecord=false;if(currRecordId){(function(){var idKey='xf-parent-of-'+currRecordId;var idUrl='xf-parent-of-url-'+currRecordId;var idTitle='xf-parent-of-title-'+currRecordId;if(sessionStorage[idUrl]){var item=$('<li>');var a=$('<a>').attr('href',sessionStorage[idUrl]).attr('title',sessionStorage[idTitle]).text(sessionStorage[idTitle]);item.append(a);$('.tableQuicklinks').append(item);isChildRecord=true;}})();}
var item=$('<li>');if(recordSelected)item.addClass('selected');var a=$('<a>').attr('href',currRecordUrl).attr('title',currRecord).text(currRecord);if(isChildRecord){$(a).addClass('xf-child-record');}
item.append(a);$('.tableQuicklinks').append(item);}
var g2=XataJax.load('xataface.modules.g2');var advancedFindForm=new g2.AdvancedFind({});function handleShowAdvancedFind(){advancedFindForm.show();$(this).addClass('expanded').removeClass('collapsed');$(this).unbind('click',handleShowAdvancedFind);$(this).bind('click',handleHideAdvancedFind);};function handleHideAdvancedFind(){advancedFindForm.hide();$(this).addClass('collapsed').removeClass('expanded');$(this).unbind('click',handleHideAdvancedFind);$(this).bind('click',handleShowAdvancedFind);}
$('a.xf-show-advanced-find').bind('click',handleShowAdvancedFind);}})();});})();}
if(typeof(window.__xatajax_included__['xataface/modules/switch_user/switch_user.js'])=='undefined'){window.__xatajax_included__['xataface/modules/switch_user/switch_user.js']=true;(function(){function _(key,defaultValue){if(xataface&&xataface.strings&&xataface.strings[key]){return xataface.strings[key];}else{return defaultValue;}}
var initSwitchUser;var $=jQuery;jQuery(document).ready(function($){var userbar=document.createElement('div');$(userbar).attr('id','switch-user-menu');$(userbar).html(_('switch_user.label.logged_in_as','Logged in as <span id="switch-user-username">&nbsp;</span>.')+' <a href="#" id="switch-user-btn" title="'+
_('switch_user.label.switch_user','Switch User')+'"><span>'+
_('switch_user.label.switch_user','Switch User')+'</span></a>');var usernameSpan=$('#switch-user-username',userbar).get(0);var switchUserBtn=$('#switch-user-btn',userbar).get(0);var isOriginalUser=true;function restoreToOriginalUser(){$.post(DATAFACE_SITE_HREF,{'-action':'switch_user','--restore':1},function(response){try{if(typeof(response)=='string'){eval('response='+response+';');}
if(response.code==200){$(usernameSpan).html(response.username);window.location.reload();}else{throw response.msg;}}catch(e){alert(e);}});}
function switchUser(username){$.post(DATAFACE_SITE_HREF,{'-action':'switch_user','--username':username},function(response){try{if(typeof(response)=='string'){eval('response='+response+';');}
if(response.code==200){$(usernameSpan).html(response.username);window.location.reload();}else{throw response.msg;}}catch(e){alert(e);}});}
initSwitchUser=function(username,isOriginal){$(usernameSpan).html(username);$('body').append(userbar);isOriginalUser=isOriginal;if(!isOriginalUser){$(userbar).addClass('non-original-user');}}
$(switchUserBtn).click(function(){if(isOriginalUser){var user=prompt(_('switch_user.message.enter_username','Please enter the name of the user you wish to switch to.'),_('switch_user.label.username','Username'));if(user){switchUser(user);}}else{if(confirm(_('switch_user.message.are_you_sure','Are you sure you want to exit this user account and return to your own account?'))){restoreToOriginalUser();}}
return false;});$.get(DATAFACE_SITE_HREF,{'-action':'switch_user_status'},function(response){try{if(response.username){initSwitchUser(response.username,response.isOriginal);}}catch(e){}});});})();}
if(typeof(window.__xatajax_included__['xataface/actions/show_hide_columns.js'])=='undefined'){window.__xatajax_included__['xataface/actions/show_hide_columns.js']=true;if(typeof(window.__xatajax_included__['jquery.noty.js'])=='undefined'){window.__xatajax_included__['jquery.noty.js']=true;if(typeof Object.create!=='function'){Object.create=function(o){function F(){}
F.prototype=o;return new F();};}
(function($){var NotyObject={init:function(options){this.options=$.extend({},$.noty.defaults,options);this.options.layout=(this.options.custom)?$.noty.layouts['inline']:$.noty.layouts[this.options.layout];if($.noty.themes[this.options.theme])
this.options.theme=$.noty.themes[this.options.theme];else
options.themeClassName=this.options.theme;delete options.layout;delete options.theme;this.options=$.extend({},this.options,this.options.layout.options);this.options.id='noty_'+(new Date().getTime()*Math.floor(Math.random()*1000000));this.options=$.extend({},this.options,options);this._build();return this;},_build:function(){var $bar=$('<div class="noty_bar noty_type_'+this.options.type+'"></div>').attr('id',this.options.id);$bar.append(this.options.template).find('.noty_text').html(this.options.text);this.$bar=(this.options.layout.parent.object!==null)?$(this.options.layout.parent.object).css(this.options.layout.parent.css).append($bar):$bar;if(this.options.themeClassName)
this.$bar.addClass(this.options.themeClassName).addClass('noty_container_type_'+this.options.type);if(this.options.buttons){this.options.closeWith=[];this.options.timeout=false;var $buttons=$('<div/>').addClass('noty_buttons');(this.options.layout.parent.object!==null)?this.$bar.find('.noty_bar').append($buttons):this.$bar.append($buttons);var self=this;$.each(this.options.buttons,function(i,button){var $button=$('<button/>').addClass((button.addClass)?button.addClass:'gray').html(button.text).attr('id',button.id?button.id:'button-'+i).appendTo(self.$bar.find('.noty_buttons')).bind('click',function(){if($.isFunction(button.onClick)){button.onClick.call($button,self);}});});}
this.$message=this.$bar.find('.noty_message');this.$closeButton=this.$bar.find('.noty_close');this.$buttons=this.$bar.find('.noty_buttons');$.noty.store[this.options.id]=this;},show:function(){var self=this;(self.options.custom)?self.options.custom.find(self.options.layout.container.selector).append(self.$bar):$(self.options.layout.container.selector).append(self.$bar);if(self.options.theme&&self.options.theme.style)
self.options.theme.style.apply(self);($.type(self.options.layout.css)==='function')?this.options.layout.css.apply(self.$bar):self.$bar.css(this.options.layout.css||{});self.$bar.addClass(self.options.layout.addClass);self.options.layout.container.style.apply($(self.options.layout.container.selector));self.showing=true;if(self.options.theme&&self.options.theme.style)
self.options.theme.callback.onShow.apply(this);if($.inArray('click',self.options.closeWith)>-1)
self.$bar.css('cursor','pointer').one('click',function(evt){self.stopPropagation(evt);if(self.options.callback.onCloseClick){self.options.callback.onCloseClick.apply(self);}
self.close();});if($.inArray('hover',self.options.closeWith)>-1)
self.$bar.one('mouseenter',function(){self.close();});if($.inArray('button',self.options.closeWith)>-1)
self.$closeButton.one('click',function(evt){self.stopPropagation(evt);self.close();});if($.inArray('button',self.options.closeWith)==-1)
self.$closeButton.remove();if(self.options.callback.onShow)
self.options.callback.onShow.apply(self);self.$bar.animate(self.options.animation.open,self.options.animation.speed,self.options.animation.easing,function(){if(self.options.callback.afterShow)self.options.callback.afterShow.apply(self);self.showing=false;self.shown=true;});if(self.options.timeout)
self.$bar.delay(self.options.timeout).promise().done(function(){self.close();});return this;},close:function(){if(this.closed)return;if(this.$bar&&this.$bar.hasClass('i-am-closing-now'))return;var self=this;if(this.showing){self.$bar.queue(function(){self.close.apply(self);})
return;}
if(!this.shown&&!this.showing){var queue=[];$.each($.noty.queue,function(i,n){if(n.options.id!=self.options.id){queue.push(n);}});$.noty.queue=queue;return;}
self.$bar.addClass('i-am-closing-now');if(self.options.callback.onClose){self.options.callback.onClose.apply(self);}
self.$bar.clearQueue().stop().animate(self.options.animation.close,self.options.animation.speed,self.options.animation.easing,function(){if(self.options.callback.afterClose)self.options.callback.afterClose.apply(self);}).promise().done(function(){if(self.options.modal){$.notyRenderer.setModalCount(-1);if($.notyRenderer.getModalCount()==0)$('.noty_modal').fadeOut('fast',function(){$(this).remove();});}
$.notyRenderer.setLayoutCountFor(self,-1);if($.notyRenderer.getLayoutCountFor(self)==0)$(self.options.layout.container.selector).remove();if(typeof self.$bar!=='undefined'&&self.$bar!==null){self.$bar.remove();self.$bar=null;self.closed=true;}
delete $.noty.store[self.options.id];if(self.options.theme.callback&&self.options.theme.callback.onClose){self.options.theme.callback.onClose.apply(self);}
if(!self.options.dismissQueue){$.noty.ontap=true;$.notyRenderer.render();}
if(self.options.maxVisible>0&&self.options.dismissQueue){$.notyRenderer.render();}})},setText:function(text){if(!this.closed){this.options.text=text;this.$bar.find('.noty_text').html(text);}
return this;},setType:function(type){if(!this.closed){this.options.type=type;this.options.theme.style.apply(this);this.options.theme.callback.onShow.apply(this);}
return this;},setTimeout:function(time){if(!this.closed){var self=this;this.options.timeout=time;self.$bar.delay(self.options.timeout).promise().done(function(){self.close();});}
return this;},stopPropagation:function(evt){evt=evt||window.event;if(typeof evt.stopPropagation!=="undefined"){evt.stopPropagation();}else{evt.cancelBubble=true;}},closed:false,showing:false,shown:false};$.notyRenderer={};$.notyRenderer.init=function(options){var notification=Object.create(NotyObject).init(options);if(notification.options.killer)
$.noty.closeAll();(notification.options.force)?$.noty.queue.unshift(notification):$.noty.queue.push(notification);$.notyRenderer.render();return($.noty.returns=='object')?notification:notification.options.id;};$.notyRenderer.render=function(){var instance=$.noty.queue[0];if($.type(instance)==='object'){if(instance.options.dismissQueue){if(instance.options.maxVisible>0){if($(instance.options.layout.container.selector+' li').length<instance.options.maxVisible){$.notyRenderer.show($.noty.queue.shift());}else{}}else{$.notyRenderer.show($.noty.queue.shift());}}else{if($.noty.ontap){$.notyRenderer.show($.noty.queue.shift());$.noty.ontap=false;}}}else{$.noty.ontap=true;}};$.notyRenderer.show=function(notification){if(notification.options.modal){$.notyRenderer.createModalFor(notification);$.notyRenderer.setModalCount(+1);}
if(notification.options.custom){if(notification.options.custom.find(notification.options.layout.container.selector).length==0){notification.options.custom.append($(notification.options.layout.container.object).addClass('i-am-new'));}else{notification.options.custom.find(notification.options.layout.container.selector).removeClass('i-am-new');}}else{if($(notification.options.layout.container.selector).length==0){$('body').append($(notification.options.layout.container.object).addClass('i-am-new'));}else{$(notification.options.layout.container.selector).removeClass('i-am-new');}}
$.notyRenderer.setLayoutCountFor(notification,+1);notification.show();};$.notyRenderer.createModalFor=function(notification){if($('.noty_modal').length==0){var modal=$('<div/>').addClass('noty_modal').addClass(notification.options.theme).data('noty_modal_count',0);if(notification.options.theme.modal&&notification.options.theme.modal.css)
modal.css(notification.options.theme.modal.css);modal.prependTo($('body')).fadeIn('fast');}};$.notyRenderer.getLayoutCountFor=function(notification){return $(notification.options.layout.container.selector).data('noty_layout_count')||0;};$.notyRenderer.setLayoutCountFor=function(notification,arg){return $(notification.options.layout.container.selector).data('noty_layout_count',$.notyRenderer.getLayoutCountFor(notification)+arg);};$.notyRenderer.getModalCount=function(){return $('.noty_modal').data('noty_modal_count')||0;};$.notyRenderer.setModalCount=function(arg){return $('.noty_modal').data('noty_modal_count',$.notyRenderer.getModalCount()+arg);};$.fn.noty=function(options){options.custom=$(this);return $.notyRenderer.init(options);};$.noty={};$.noty.queue=[];$.noty.ontap=true;$.noty.layouts={};$.noty.themes={};$.noty.returns='object';$.noty.store={};$.noty.get=function(id){return $.noty.store.hasOwnProperty(id)?$.noty.store[id]:false;};$.noty.close=function(id){return $.noty.get(id)?$.noty.get(id).close():false;};$.noty.setText=function(id,text){return $.noty.get(id)?$.noty.get(id).setText(text):false;};$.noty.setType=function(id,type){return $.noty.get(id)?$.noty.get(id).setType(type):false;};$.noty.clearQueue=function(){$.noty.queue=[];};$.noty.closeAll=function(){$.noty.clearQueue();$.each($.noty.store,function(id,noty){noty.close();});};var windowAlert=window.alert;$.noty.consumeAlert=function(options){window.alert=function(text){if(options)
options.text=text;else
options={text:text};$.notyRenderer.init(options);};};$.noty.stopConsumeAlert=function(){window.alert=windowAlert;};$.noty.defaults={layout:'top',theme:'defaultTheme',type:'alert',text:'',dismissQueue:true,template:'<div class="noty_message"><span class="noty_text"></span><div class="noty_close"></div></div>',animation:{open:{height:'toggle'},close:{height:'toggle'},easing:'swing',speed:500},timeout:false,force:false,modal:false,maxVisible:5,killer:false,closeWith:['click'],callback:{onShow:function(){},afterShow:function(){},onClose:function(){},afterClose:function(){},onCloseClick:function(){}},buttons:false};$(window).resize(function(){$.each($.noty.layouts,function(index,layout){layout.container.style.apply($(layout.container.selector));});});})(jQuery);window.noty=function noty(options){return jQuery.notyRenderer.init(options);};(function($){$.noty.layouts.bottom={name:'bottom',options:{},container:{object:'<ul id="noty_bottom_layout_container" />',selector:'ul#noty_bottom_layout_container',style:function(){$(this).css({bottom:0,left:'5%',position:'fixed',width:'90%',height:'auto',margin:0,padding:0,listStyleType:'none',zIndex:9999999});}},parent:{object:'<li />',selector:'li',css:{}},css:{display:'none'},addClass:''};})(jQuery);(function($){$.noty.layouts.bottomCenter={name:'bottomCenter',options:{},container:{object:'<ul id="noty_bottomCenter_layout_container" />',selector:'ul#noty_bottomCenter_layout_container',style:function(){$(this).css({bottom:20,left:0,position:'fixed',width:'310px',height:'auto',margin:0,padding:0,listStyleType:'none',zIndex:10000000});$(this).css({left:($(window).width()-$(this).outerWidth(false))/2+'px'});}},parent:{object:'<li />',selector:'li',css:{}},css:{display:'none',width:'310px'},addClass:''};})(jQuery);(function($){$.noty.layouts.bottomLeft={name:'bottomLeft',options:{},container:{object:'<ul id="noty_bottomLeft_layout_container" />',selector:'ul#noty_bottomLeft_layout_container',style:function(){$(this).css({bottom:20,left:20,position:'fixed',width:'310px',height:'auto',margin:0,padding:0,listStyleType:'none',zIndex:10000000});if(window.innerWidth<600){$(this).css({left:5});}}},parent:{object:'<li />',selector:'li',css:{}},css:{display:'none',width:'310px'},addClass:''};})(jQuery);(function($){$.noty.layouts.bottomRight={name:'bottomRight',options:{},container:{object:'<ul id="noty_bottomRight_layout_container" />',selector:'ul#noty_bottomRight_layout_container',style:function(){$(this).css({bottom:20,right:20,position:'fixed',width:'310px',height:'auto',margin:0,padding:0,listStyleType:'none',zIndex:10000000});if(window.innerWidth<600){$(this).css({right:5});}}},parent:{object:'<li />',selector:'li',css:{}},css:{display:'none',width:'310px'},addClass:''};})(jQuery);(function($){$.noty.layouts.center={name:'center',options:{},container:{object:'<ul id="noty_center_layout_container" />',selector:'ul#noty_center_layout_container',style:function(){$(this).css({position:'fixed',width:'310px',height:'auto',margin:0,padding:0,listStyleType:'none',zIndex:10000000});var dupe=$(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr('id','dupe');$("body").append(dupe);dupe.find('.i-am-closing-now').remove();dupe.find('li').css('display','block');var actual_height=dupe.height();dupe.remove();if($(this).hasClass('i-am-new')){$(this).css({left:($(window).width()-$(this).outerWidth(false))/2+'px',top:($(window).height()-actual_height)/2+'px'});}else{$(this).animate({left:($(window).width()-$(this).outerWidth(false))/2+'px',top:($(window).height()-actual_height)/2+'px'},500);}}},parent:{object:'<li />',selector:'li',css:{}},css:{display:'none',width:'310px'},addClass:''};})(jQuery);(function($){$.noty.layouts.centerLeft={name:'centerLeft',options:{},container:{object:'<ul id="noty_centerLeft_layout_container" />',selector:'ul#noty_centerLeft_layout_container',style:function(){$(this).css({left:20,position:'fixed',width:'310px',height:'auto',margin:0,padding:0,listStyleType:'none',zIndex:10000000});var dupe=$(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr('id','dupe');$("body").append(dupe);dupe.find('.i-am-closing-now').remove();dupe.find('li').css('display','block');var actual_height=dupe.height();dupe.remove();if($(this).hasClass('i-am-new')){$(this).css({top:($(window).height()-actual_height)/2+'px'});}else{$(this).animate({top:($(window).height()-actual_height)/2+'px'},500);}
if(window.innerWidth<600){$(this).css({left:5});}}},parent:{object:'<li />',selector:'li',css:{}},css:{display:'none',width:'310px'},addClass:''};})(jQuery);(function($){$.noty.layouts.centerRight={name:'centerRight',options:{},container:{object:'<ul id="noty_centerRight_layout_container" />',selector:'ul#noty_centerRight_layout_container',style:function(){$(this).css({right:20,position:'fixed',width:'310px',height:'auto',margin:0,padding:0,listStyleType:'none',zIndex:10000000});var dupe=$(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr('id','dupe');$("body").append(dupe);dupe.find('.i-am-closing-now').remove();dupe.find('li').css('display','block');var actual_height=dupe.height();dupe.remove();if($(this).hasClass('i-am-new')){$(this).css({top:($(window).height()-actual_height)/2+'px'});}else{$(this).animate({top:($(window).height()-actual_height)/2+'px'},500);}
if(window.innerWidth<600){$(this).css({right:5});}}},parent:{object:'<li />',selector:'li',css:{}},css:{display:'none',width:'310px'},addClass:''};})(jQuery);(function($){$.noty.layouts.inline={name:'inline',options:{},container:{object:'<ul class="noty_inline_layout_container" />',selector:'ul.noty_inline_layout_container',style:function(){$(this).css({width:'100%',height:'auto',margin:0,padding:0,listStyleType:'none',zIndex:9999999});}},parent:{object:'<li />',selector:'li',css:{}},css:{display:'none'},addClass:''};})(jQuery);(function($){$.noty.layouts.top={name:'top',options:{},container:{object:'<ul id="noty_top_layout_container" />',selector:'ul#noty_top_layout_container',style:function(){$(this).css({top:0,left:'5%',position:'fixed',width:'90%',height:'auto',margin:0,padding:0,listStyleType:'none',zIndex:9999999});}},parent:{object:'<li />',selector:'li',css:{}},css:{display:'none'},addClass:''};})(jQuery);(function($){$.noty.layouts.topCenter={name:'topCenter',options:{},container:{object:'<ul id="noty_topCenter_layout_container" />',selector:'ul#noty_topCenter_layout_container',style:function(){$(this).css({top:20,left:0,position:'fixed',width:'310px',height:'auto',margin:0,padding:0,listStyleType:'none',zIndex:10000000});$(this).css({left:($(window).width()-$(this).outerWidth(false))/2+'px'});}},parent:{object:'<li />',selector:'li',css:{}},css:{display:'none',width:'310px'},addClass:''};})(jQuery);(function($){$.noty.layouts.topLeft={name:'topLeft',options:{},container:{object:'<ul id="noty_topLeft_layout_container" />',selector:'ul#noty_topLeft_layout_container',style:function(){$(this).css({top:20,left:20,position:'fixed',width:'310px',height:'auto',margin:0,padding:0,listStyleType:'none',zIndex:10000000});if(window.innerWidth<600){$(this).css({left:5});}}},parent:{object:'<li />',selector:'li',css:{}},css:{display:'none',width:'310px'},addClass:''};})(jQuery);(function($){$.noty.layouts.topRight={name:'topRight',options:{},container:{object:'<ul id="noty_topRight_layout_container" />',selector:'ul#noty_topRight_layout_container',style:function(){$(this).css({top:20,right:20,position:'fixed',width:'310px',height:'auto',margin:0,padding:0,listStyleType:'none',zIndex:10000000});if(window.innerWidth<600){$(this).css({right:5});}}},parent:{object:'<li />',selector:'li',css:{}},css:{display:'none',width:'310px'},addClass:''};})(jQuery);(function($){$.noty.themes.defaultTheme={name:'defaultTheme',helpers:{borderFix:function(){if(this.options.dismissQueue){var selector=this.options.layout.container.selector+' '+this.options.layout.parent.selector;switch(this.options.layout.name){case'top':$(selector).css({borderRadius:'0px 0px 0px 0px'});$(selector).last().css({borderRadius:'0px 0px 5px 5px'});break;case'topCenter':case'topLeft':case'topRight':case'bottomCenter':case'bottomLeft':case'bottomRight':case'center':case'centerLeft':case'centerRight':case'inline':$(selector).css({borderRadius:'0px 0px 0px 0px'});$(selector).first().css({'border-top-left-radius':'5px','border-top-right-radius':'5px'});$(selector).last().css({'border-bottom-left-radius':'5px','border-bottom-right-radius':'5px'});break;case'bottom':$(selector).css({borderRadius:'0px 0px 0px 0px'});$(selector).first().css({borderRadius:'5px 5px 0px 0px'});break;default:break;}}}},modal:{css:{position:'fixed',width:'100%',height:'100%',backgroundColor:'#000',zIndex:10000,opacity:0.6,display:'none',left:0,top:0}},style:function(){this.$bar.css({overflow:'hidden',background:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAoCAYAAAAPOoFWAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAPZJREFUeNq81tsOgjAMANB2ov7/7ypaN7IlIwi9rGuT8QSc9EIDAsAznxvY4pXPKr05RUE5MEVB+TyWfCEl9LZApYopCmo9C4FKSMtYoI8Bwv79aQJU4l6hXXCZrQbokJEksxHo9KMOgc6w1atHXM8K9DVC7FQnJ0i8iK3QooGgbnyKgMDygBWyYFZoqx4qS27KqLZJjA1D0jK6QJcYEQEiWv9PGkTsbqxQ8oT+ZtZB6AkdsJnQDnMoHXHLGKOgDYuCWmYhEERCI5gaamW0bnHdA3k2ltlIN+2qKRyCND0bhqSYCyTB3CAOc4WusBEIpkeBuPgJMAAX8Hs1NfqHRgAAAABJRU5ErkJggg==') repeat-x scroll left top #fff"});this.$message.css({fontSize:'13px',lineHeight:'16px',textAlign:'center',padding:'8px 10px 9px',width:'auto',position:'relative'});this.$closeButton.css({position:'absolute',top:4,right:4,width:10,height:10,background:"url(data:image/png;base64,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)",display:'none',cursor:'pointer'});this.$buttons.css({padding:5,textAlign:'right',borderTop:'1px solid #ccc',backgroundColor:'#fff'});this.$buttons.find('button').css({marginLeft:5});this.$buttons.find('button:first').css({marginLeft:0});this.$bar.bind({mouseenter:function(){$(this).find('.noty_close').stop().fadeTo('normal',1);},mouseleave:function(){$(this).find('.noty_close').stop().fadeTo('normal',0);}});switch(this.options.layout.name){case'top':this.$bar.css({borderRadius:'0px 0px 5px 5px',borderBottom:'2px solid #eee',borderLeft:'2px solid #eee',borderRight:'2px solid #eee',boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"});break;case'topCenter':case'center':case'bottomCenter':case'inline':this.$bar.css({borderRadius:'5px',border:'1px solid #eee',boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"});this.$message.css({fontSize:'13px',textAlign:'center'});break;case'topLeft':case'topRight':case'bottomLeft':case'bottomRight':case'centerLeft':case'centerRight':this.$bar.css({borderRadius:'5px',border:'1px solid #eee',boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"});this.$message.css({fontSize:'13px',textAlign:'left'});break;case'bottom':this.$bar.css({borderRadius:'5px 5px 0px 0px',borderTop:'2px solid #eee',borderLeft:'2px solid #eee',borderRight:'2px solid #eee',boxShadow:"0 -2px 4px rgba(0, 0, 0, 0.1)"});break;default:this.$bar.css({border:'2px solid #eee',boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"});break;}
switch(this.options.type){case'alert':case'notification':this.$bar.css({backgroundColor:'#FFF',borderColor:'#CCC',color:'#444'});break;case'warning':this.$bar.css({backgroundColor:'#FFEAA8',borderColor:'#FFC237',color:'#826200'});this.$buttons.css({borderTop:'1px solid #FFC237'});break;case'error':this.$bar.css({backgroundColor:'red',borderColor:'darkred',color:'#FFF'});this.$message.css({fontWeight:'bold'});this.$buttons.css({borderTop:'1px solid darkred'});break;case'information':this.$bar.css({backgroundColor:'#57B7E2',borderColor:'#0B90C4',color:'#FFF'});this.$buttons.css({borderTop:'1px solid #0B90C4'});break;case'success':this.$bar.css({backgroundColor:'lightgreen',borderColor:'#50C24E',color:'darkgreen'});this.$buttons.css({borderTop:'1px solid #50C24E'});break;default:this.$bar.css({backgroundColor:'#FFF',borderColor:'#CCC',color:'#444'});break;}},callback:{onShow:function(){$.noty.themes.defaultTheme.helpers.borderFix.apply(this);},onClose:function(){$.noty.themes.defaultTheme.helpers.borderFix.apply(this);}}};})(jQuery);}
(function(){var $=jQuery;var controllers=XataJax.load('xataface.controllers');controllers.ShowHideColumnsController={saveCallbacks:[]};function buildRequestData(el){var data={fields:{}};$('input[data-field-name]',el).each(function(){var fieldName=$(this).attr('data-field-name');if(fieldName.indexOf('.')<0){var visibilityType=$(this).attr('data-visibility-type');var visibility=$(this).is(':checked')?'visible':'hidden';data.fields[fieldName]=data.fields[fieldName]||{};var fieldConfig=data.fields[fieldName];fieldConfig[visibilityType]=visibility;}else{var parts=fieldName.split('.');var relationshipName=parts[0];var sfieldName=parts[1];if(typeof(data['relationships'])==='undefined'){data.relationships={};}
if(typeof(data.relationships[relationshipName])==='undefined'){data.relationships[relationshipName]={name:relationshipName,fields:{}};}
var relationshipConfig=data.relationships[relationshipName];relationshipConfig.fields[fieldName]=relationshipConfig.fields[fieldName]||{};var fieldConfig=relationshipConfig.fields[fieldName];var visibilityType=$(this).attr('data-visibility-type');var visibility=$(this).is(':checked')?'visible':'hidden';fieldConfig[visibilityType]=visibility;}});return data;}
function showDialog(layout,type,message,callback){layout=layout||'top';type=type||'alert';var n=noty({text:'<b>'+message+'</b>',type:type||'alert',dismissQueue:true,layout:layout||'top',theme:'defaultTheme',buttons:[{addClass:'btn btn-primary',text:'Ok',onClick:callback}]});}
registerXatafaceDecorator(function(el){var saveBtn=$('button.save',el);saveBtn.click(function(){var query={'-action':'show_hide_columns','-table':$('table.show-hide-columns-grid',el).attr('data-table-name'),'-format':'json','--data':JSON.stringify(buildRequestData(el))};$.post(DATAFACE_SITE_HREF,query,function(res){console.log(res);if(res&&res.code>=200&&res.code<300){$(controllers.ShowHideColumnsController.saveCallbacks).each(function(k,v){if(res.preventDefault)return;v.call(window,res);});if(!res.preventDefault){var msg='Successfully saved column orderings.';if(res.errors&&res.errors.length>0){msg='<p>Saved column orders but some errors were reported:</p><ul>';$(res.errors).each(function(k,v){msg+='<li>'+v+'</li>';});msg+='</ul>';}
showDialog(null,null,msg,function(){window.location.href=DATAFACE_SITE_HREF+'?-table='+$('table.show-hide-columns-grid',el).attr('data-table-name');});}}else{showDialog(null,null,msg,function(){});}});});$('input.select-all',el).click(function(){$('input[data-visibility-type="'+$(this).attr('data-visibility-type')+'"]',$(this).parents('table').first()).prop('checked',$(this).prop('checked'));});});})();}
if(typeof(XataJax)!="undefined")XataJax.ready();